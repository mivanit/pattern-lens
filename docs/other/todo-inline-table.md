 # Inline TODOs

| Location | Tag | Todo | GitHub | Issue |
|:---------|:----|:-----|:-------|:------|
| [`pattern_lens/activations.py#203`](/pattern_lens/activations.py#203) | TODO | batching? | [View](https://github.com/mivanit/pattern-lens/blob/main/pattern_lens/activations.py#L203) | [Create](https://github.com/mivanit/pattern-lens/issues/new?title=batching%3F&body=%23%20source%0A%0A%5B%60pattern_lens%2Factivations.py%23L203%60%5D%28https%3A%2F%2Fgithub.com%2Fmivanit%2Fpattern-lens%2Fblob%2Fmain%2Fpattern_lens%2Factivations.py%23L203%29%0A%0A%23%20context%0A%60%60%60python%0A%09with%20torch.no_grad%28%29%3A%0A%09%09model.eval%28%29%0A%09%09%23%20TODO%3A%20batching%3F%0A%09%09_%2C%20cache_torch%20%3D%20model.run_with_cache%28%0A%09%09%09prompt_str%2C%0A%60%60%60&labels=enhancement) |
| [`pattern_lens/activations.py#352`](/pattern_lens/activations.py#352) | TODO | this basically does nothing, since we load the activations and then immediately get rid of them. | [View](https://github.com/mivanit/pattern-lens/blob/main/pattern_lens/activations.py#L352) | [Create](https://github.com/mivanit/pattern-lens/issues/new?title=this%20basically%20does%20nothing%2C%20since%20we%20load%20the%20activations%20and%20then%20immediately%20get%20rid%20of%20them.&body=%23%20source%0A%0A%5B%60pattern_lens%2Factivations.py%23L352%60%5D%28https%3A%2F%2Fgithub.com%2Fmivanit%2Fpattern-lens%2Fblob%2Fmain%2Fpattern_lens%2Factivations.py%23L352%29%0A%0A%23%20context%0A%60%60%60python%0A%09%09%09%09return%20path%2C%20cache%0A%09%09%09else%3A%0A%09%09%09%09%23%20TODO%3A%20this%20basically%20does%20nothing%2C%20since%20we%20load%20the%20activations%20and%20then%20immediately%20get%20rid%20of%20them.%0A%09%09%09%09%23%20maybe%20refactor%20this%20so%20that%20load_activations%20can%20take%20a%20parameter%20to%20simply%20assert%20that%20the%20cache%20exists%3F%0A%09%09%09%09%23%20this%20will%20let%20us%20avoid%20loading%20it%2C%20which%20slows%20things%20down%0A%60%60%60&labels=enhancement) |
| [`pattern_lens/activations.py#484`](/pattern_lens/activations.py#484) | TODO | not implemented yet | [View](https://github.com/mivanit/pattern-lens/blob/main/pattern_lens/activations.py#L484) | [Create](https://github.com/mivanit/pattern-lens/issues/new?title=not%20implemented%20yet&body=%23%20source%0A%0A%5B%60pattern_lens%2Factivations.py%23L484%60%5D%28https%3A%2F%2Fgithub.com%2Fmivanit%2Fpattern-lens%2Fblob%2Fmain%2Fpattern_lens%2Factivations.py%23L484%29%0A%0A%23%20context%0A%60%60%60python%0A%09%09%09write_html_index%28save_path_p%29%0A%0A%09%23%20TODO%3A%20not%20implemented%20yet%0A%09if%20stacked_heads%3A%0A%09%09raise%20NotImplementedError%28%22stacked_heads%20not%20implemented%20yet%22%29%0A%60%60%60&labels=enhancement) |
| [`pattern_lens/figures.py#184`](/pattern_lens/figures.py#184) | TODO | do something with results | [View](https://github.com/mivanit/pattern-lens/blob/main/pattern_lens/figures.py#L184) | [Create](https://github.com/mivanit/pattern-lens/issues/new?title=do%20something%20with%20results&body=%23%20source%0A%0A%5B%60pattern_lens%2Ffigures.py%23L184%60%5D%28https%3A%2F%2Fgithub.com%2Fmivanit%2Fpattern-lens%2Fblob%2Fmain%2Fpattern_lens%2Ffigures.py%23L184%29%0A%0A%23%20context%0A%60%60%60python%0A%09%09%09%09results%5Bfunc_name%5D%5B%28layer_idx%2C%20head_idx%29%5D%20%3D%20status%0A%0A%09%23%20TODO%3A%20do%20something%20with%20results%0A%0A%09generate_prompts_jsonl%28save_path%20%2F%20model_cfg.model_name%29%0A%60%60%60&labels=enhancement) |
| [`pattern_lens/figure_util.py#175`](/pattern_lens/figure_util.py#175) | TYPING | error: Item "SubFigure" of "Figure | SubFigure" has no attribute "tight_layout"  [union-attr] | [View](https://github.com/mivanit/pattern-lens/blob/main/pattern_lens/figure_util.py#L175) | [Create](https://github.com/mivanit/pattern-lens/issues/new?title=error%3A%20Item%20%22SubFigure%22%20of%20%22Figure%20%7C%20SubFigure%22%20has%20no%20attribute%20%22tight_layout%22%20%20%5Bunion-attr%5D&body=%23%20source%0A%0A%5B%60pattern_lens%2Ffigure_util.py%23L175%60%5D%28https%3A%2F%2Fgithub.com%2Fmivanit%2Fpattern-lens%2Fblob%2Fmain%2Fpattern_lens%2Ffigure_util.py%23L175%29%0A%0A%23%20context%0A%60%60%60python%0A%09%09%09for%20name%2C%20ax%20in%20axes_dict.items%28%29%3A%0A%09%09%09%09fig_path%3A%20Path%20%3D%20save_dir%20%2F%20f%22%7Bfunc_name%7D.%7Bname%7D.%7Bfmt%7D%22%0A%09%09%09%09%23%20TYPING%3A%20error%3A%20Item%20%22SubFigure%22%20of%20%22Figure%20%7C%20SubFigure%22%20has%20no%20attribute%20%22tight_layout%22%20%20%5Bunion-attr%5D%0A%09%09%09%09ax.figure.tight_layout%28%29%20%20%23%20type%3A%20ignore%5Bunion-attr%5D%0A%09%09%09%09%23%20TYPING%3A%20error%3A%20Item%20%22SubFigure%22%20of%20%22Figure%20%7C%20SubFigure%22%20has%20no%20attribute%20%22savefig%22%20%20%5Bunion-attr%5D%0A%60%60%60&labels=TYPING) |
| [`pattern_lens/figure_util.py#177`](/pattern_lens/figure_util.py#177) | TYPING | error: Item "SubFigure" of "Figure | SubFigure" has no attribute "savefig"  [union-attr] | [View](https://github.com/mivanit/pattern-lens/blob/main/pattern_lens/figure_util.py#L177) | [Create](https://github.com/mivanit/pattern-lens/issues/new?title=error%3A%20Item%20%22SubFigure%22%20of%20%22Figure%20%7C%20SubFigure%22%20has%20no%20attribute%20%22savefig%22%20%20%5Bunion-attr%5D&body=%23%20source%0A%0A%5B%60pattern_lens%2Ffigure_util.py%23L177%60%5D%28https%3A%2F%2Fgithub.com%2Fmivanit%2Fpattern-lens%2Fblob%2Fmain%2Fpattern_lens%2Ffigure_util.py%23L177%29%0A%0A%23%20context%0A%60%60%60python%0A%09%09%09%09%23%20TYPING%3A%20error%3A%20Item%20%22SubFigure%22%20of%20%22Figure%20%7C%20SubFigure%22%20has%20no%20attribute%20%22tight_layout%22%20%20%5Bunion-attr%5D%0A%09%09%09%09ax.figure.tight_layout%28%29%20%20%23%20type%3A%20ignore%5Bunion-attr%5D%0A%09%09%09%09%23%20TYPING%3A%20error%3A%20Item%20%22SubFigure%22%20of%20%22Figure%20%7C%20SubFigure%22%20has%20no%20attribute%20%22savefig%22%20%20%5Bunion-attr%5D%0A%09%09%09%09ax.figure.savefig%28fig_path%29%20%20%23%20type%3A%20ignore%5Bunion-attr%5D%0A%09%09%09%09%23%20TYPING%3A%20error%3A%20Argument%201%20to%20%22close%22%20has%20incompatible%20type%20%22Figure%20%7C%20SubFigure%22%3B%20expected%20%22int%20%7C%20str%20%7C%20Figure%20%7C%20Literal%5B%27all%27%5D%20%7C%20None%22%20%20%5Barg-type%5D%0A%60%60%60&labels=TYPING) |
| [`pattern_lens/figure_util.py#179`](/pattern_lens/figure_util.py#179) | TYPING | error: Argument 1 to "close" has incompatible type "Figure | SubFigure"; expected "int | str | Figure | Literal['all'] | None"  [arg-type] | [View](https://github.com/mivanit/pattern-lens/blob/main/pattern_lens/figure_util.py#L179) | [Create](https://github.com/mivanit/pattern-lens/issues/new?title=error%3A%20Argument%201%20to%20%22close%22%20has%20incompatible%20type%20%22Figure%20%7C%20SubFigure%22%3B%20expected%20%22int%20%7C%20str%20%7C%20Figure%20%7C%20Literal%5B%27all%27%5D%20%7C%20None%22%20%20%5Barg-type%5D&body=%23%20source%0A%0A%5B%60pattern_lens%2Ffigure_util.py%23L179%60%5D%28https%3A%2F%2Fgithub.com%2Fmivanit%2Fpattern-lens%2Fblob%2Fmain%2Fpattern_lens%2Ffigure_util.py%23L179%29%0A%0A%23%20context%0A%60%60%60python%0A%09%09%09%09%23%20TYPING%3A%20error%3A%20Item%20%22SubFigure%22%20of%20%22Figure%20%7C%20SubFigure%22%20has%20no%20attribute%20%22savefig%22%20%20%5Bunion-attr%5D%0A%09%09%09%09ax.figure.savefig%28fig_path%29%20%20%23%20type%3A%20ignore%5Bunion-attr%5D%0A%09%09%09%09%23%20TYPING%3A%20error%3A%20Argument%201%20to%20%22close%22%20has%20incompatible%20type%20%22Figure%20%7C%20SubFigure%22%3B%20expected%20%22int%20%7C%20str%20%7C%20Figure%20%7C%20Literal%5B%27all%27%5D%20%7C%20None%22%20%20%5Barg-type%5D%0A%09%09%09%09plt.close%28ax.figure%29%20%20%23%20type%3A%20ignore%5Barg-type%5D%0A%60%60%60&labels=TYPING) |
